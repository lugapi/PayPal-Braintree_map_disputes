
![index](./screenshots/index.png)
# Installation and Usage
## Prerequisites
* Node.js 14 or higher
* npm 7 or higher
* A PayPal & Dispute Sandbox account (for development purposes)
* A Braintree Payment Token (optional, for mass transaction create)

## Installation
1. Clone the Git repository: `git clone https://github.com/lugapi/PayPal-Braintree_map_disputes.git`
2. Run the following command to install dependencies: `npm install`

## Configuration
1. Copy the `.env.example` file into a new file named `.env`
2. Replace the default values with your own information:
	* `PAYPAL_CLIENT_ID`: your PayPal Sandbox client ID
	* `PAYPAL_CLIENT_SECRET`: your PayPal Sandbox client secret
	...
3. Ensure you have installed the Braintree library

## Usage
1. Run the following command to start the application: `npm start`
2. Use the "Create Transactions" button to generate transactions in batch
3. **USE A PAYMENT METHOD TOKEN TO CREATE TRANSACTIONS (BYPASSING FRONT-END MANAGEMENT)**

## Transaction Token
When creating a transaction, a token is generated and displayed in the console. This token can be used to retrieve transaction information.

## API REST
The API REST is available on port 3000 (default). You can use tools like Postman or cURL to interact with the API.

### Create disputes: `POST /create-the-disputes`
- Request 
```json
{
    "buyerTrx": [
        "57B33410AL633261W",
        "3XD2509525082880M"
    ]
}
```

- Response 
```json
[
    {
        "message": "No valid dispute reasons",
        "transaction_id": "57B33410AL633261W"
    },
    {
        "message": "No valid dispute reasons",
        "transaction_id": "3XD2509525082880M"
    },
    {
        "links": [
            {
                "href": "https://api-m.sandbox.paypal.com/v1/customer/disputes/PP-R-PZT-10101450",
                "rel": "self",
                "method": "GET"
            }
        ]
    }
]
```

### Retrieve dispute mapping: `POST /search-disputes-created`
- Request 
```json
{
  "caseNumbers": ["PP-R-XVW-10101436", "PP-R-XVW-10101437"]
}
```

- Response 
```json
[
    {
        "PayPal_Dispute": "PP-R-XVW-10101436",
        "Braintree_Dispute": "5bpq7phhfw5c6bx5"
    },
    {
        "PayPal_Dispute": "PP-R-XVW-10101439",
        "Braintree_Dispute": null,
        "message": "No dispute found for this case number"
    }
]
```




## Limitations and Constraints
* THIS IS NOT AN OFFICIAL PAYPAL PRODUCT OR SOLUTION.
* This application is not intended for production use.
* The transactions generated by this application are not real and cannot be paid.
